# 코드 점검 결과 및 개선 사항

## 현재 구조의 문제점 요약

### 1. 입력 데이터 구조 문제
- ❌ 불필요한 필드: `productName`, `priceRange`, `platform`, `brandTone`
- ✅ 요구사항: "상품 콘텐츠 설명(텍스트)" + "상품 이미지"만 사용
- 📝 개선: 필드를 `productDescription`(상품 설명)만 필수로, 이미지는 선택

### 2. 프롬프트 설계 문제
- ❌ 불필요한 정보(가격대, 플랫폼, 브랜드 톤)가 프롬프트에 포함
- ❌ 과장된 마케팅 표현 방지 지침 없음
- 📝 개선: 상품 설명과 이미지만으로 프롬프트 구성, 허위/과장 표현 방지 지침 추가

### 3. 입력 검증 부족
- ❌ 상품 설명 텍스트 길이 검증 없음 (최소/최대)
- ❌ 이미지 파일 유효성 검증 없음
- ❌ 이미지 크기 제한 없음
- 📝 개선: 텍스트 길이 제한(최소 10자, 최대 5000자), 이미지 타입/크기 검증

### 4. 결과 데이터 구조 불일치
- ❌ 필드명: `content` → 요구사항: `mainContent`
- ❌ `imageUrl` 필드 필요성 검토
- 📝 개선: `{ imageSummary, mainContent, imageCaption }` 형식으로 통일

### 5. 에러 처리 부족
- ❌ 이미지 읽기 실패 처리 미흡
- ❌ OpenAI 응답이 JSON이 아닐 때 처리 미흡
- ❌ 사용자 에러 메시지와 개발자 로그 구분 없음
- 📝 개선: 단계별 에러 처리 강화, 사용자 친화적 메시지

## 수정이 필요한 파일 목록

1. **server/index.js** (우선순위: 높음)
   - 프롬프트 생성 함수 수정
   - 입력 검증 로직 추가
   - 결과 데이터 구조 변경 (content → mainContent)
   - 에러 처리 개선

2. **src/components/InputSection.jsx** (우선순위: 높음)
   - 불필요한 입력 필드 제거 (가격대, 플랫폼, 브랜드 톤)
   - 상품명 필드 제거 (상품 설명만 사용)
   - 텍스트 길이 검증 추가
   - 이미지 파일 검증 추가

3. **src/utils/api.js** (우선순위: 중간)
   - 요청 데이터 구조 간소화
   - 에러 처리 개선

4. **src/components/ResultSection.jsx** (우선순위: 중간)
   - 필드명 변경 (content → mainContent)

## 우선순위 기준 작업 순서

1. **1단계: 입력 필드 간소화** (최우선)
   - InputSection에서 불필요한 필드 제거
   - 상품 설명만 필수 입력으로 변경

2. **2단계: 서버 프롬프트 및 검증** (최우선)
   - 프롬프트를 상품 설명+이미지만 사용하도록 수정
   - 입력 검증 로직 추가
   - 결과 데이터 구조 변경

3. **3단계: 에러 처리 강화** (중요)
   - 이미지 검증
   - 텍스트 길이 검증
   - 사용자 친화적 에러 메시지

4. **4단계: 결과 표시 수정** (중요)
   - 필드명 변경 반영

## 수정 기준

- **입력 텍스트**: 최소 10자, 최대 5000자
- **이미지**: 선택사항, 첫 번째 이미지만 사용, 최대 10MB
- **이미지 타입**: jpg, jpeg, png, webp
- **프롬프트**: 상품 설명과 이미지만 사용, 허위/과장 표현 방지
